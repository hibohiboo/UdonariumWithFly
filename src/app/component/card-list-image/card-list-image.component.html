<div class="image-box" style="position: relative" [appTooltip]="card" [cardState]="CardStateFront">
  <ng-container *ngIf="!card?.isFront"><ng-container *ngTemplateOutlet="backFace"></ng-container></ng-container>
  <div class="image contain front" [ngClass]="{'reverse': card && card.rotate == 180 }" style="position: relative" >
    <img #cardImage [src]="card?.frontImage?.url | safe: 'resourceUrl'" (load)="onCardImageLoad()" style="position: absolute">
    <div class="text" style="z-index: 5; position: absolute"
      [style.width.px]="imageAreaRect.width" [style.height.px]="imageAreaRect.height" [style.left.px]="imageAreaRect.left" [style.top.px]="imageAreaRect.top"
      [ngStyle]="{transform: 'scale(' + imageAreaRect.scale + ')'}">
      <div [style.font-size.px]="cardFontSize" [style.color]="cardColor" [style.text-shadow]="textShadowCss" [innerHTML]="rubiedText | safe: 'html'"></div>
    </div>
  </div>
  <ng-container *ngIf="card?.isFront"><ng-container *ngTemplateOutlet="backFace"></ng-container></ng-container>
</div>
<ng-template #backFace>
  <div class="image contain back" style="position: relative">
    <img [src]="card?.backImage?.url | safe: 'resourceUrl'" style="position: absolute" [ngClass]="{'reverse': card && card.rotate == 180 }">
    <i class="indicate-text">Back</i>
  </div>
</ng-template>